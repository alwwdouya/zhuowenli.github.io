<!DOCTYPE html>
<html lang="cn">
    <head>
        <meta charset="utf-8">
        <title>图片展示动画</title>
        <link rel="stylesheet" href="style.css">
    </head>
    <body>
		<div class="grid"></div>
		<span class="animation">预览</span>
		<script type="text/javascript" src="../../../statics/js/jquery/jquery-2.1.1.min.js"></script>
		<script type="text/javascript" src="../../../statics/js/jquery/jquery.easing.1.3.min.js"></script>
		<script type="text/javascript">
			var images = "",
				count  = 50;
			for (var i = 1; i <= count; i++) {
				images += '<img src="img/'+ i +'_.jpg" />'
			};
			$(".grid").append(images);

			var d = 0,
				ry,tz,s;

			$('.animation').on('click',function(){
				// reset();
				init();
			});

			function reset() {
				$('img').each(function () {
					$(this).removeAttr("style");
				})
			}

			function init() {				
				$('img').each(function(){
					d = Math.random() * 1000;
					$(this).delay(d).animate(
						{opacity : 0},
						{
							step : function (n) {
								s = 1 - n;
								$(this).css("transform","scale("+ s +")");
							},
							duration : 1000
						}
					)
					.promise()
					.done(function () {
						strom();
					});
				});
			}

			function strom () {
				$('img').each(function(){
					d = Math.random() * 1000;
					$(this).delay(d).animate(
						{opacity : 1},
						{
							step : function (n) {
								ry = (1 - n) * 360;
								tz = (1 - n) * 1000;
								$(this).css("transform","rotateY("+ ry +"deg) translateZ("+ tz +"px)");
							},
							duration : 3000,
							easing : 'easeOutQuint'
						}
					);
				});
			}
			// init();
		</script>
    </body>
</html>