<!DOCTYPE html>
<html lang="cn">
<head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />

    <link rel="dns-prefetch" href="//disqus.com"/>
    <link rel="dns-prefetch" href="//a.disquscdn.com"/>

    <meta name="Keywords" content="卓文理,前端,前端开发,网页设计,交互设计,PhoneGap,NodeJS,Android,Webapp,javascript"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"/>
    <meta content="yes" name="apple-mobile-web-app-capable" />
    <meta content="black" name="apple-mobile-web-app-status-bar-style" />
    <meta content="telephone=no" name="format-detection" />
    
    <meta name="author" content="卓文理">

    <link rel="apple-touch-icon-precomposed" href="/res/img/icon.png">
    <link rel="apple-touch-icon-precomposed" href="/res/img/icon-72.png" sizes="72x72" />
    <link rel="apple-touch-icon-precomposed" href="/res/img/icon-76.png" sizes="76x76" />
    <link rel="apple-touch-icon-precomposed" href="/res/img/icon-114.png" sizes="114x114" />
    <link rel="apple-touch-icon-precomposed" href="/res/img/icon-120.png" sizes="120x120" />
    <link rel="apple-touch-icon-precomposed" href="/res/img/icon-152.png" sizes="152x152" />
    <link href="/res/img/icon.png" rel="Shortcut Icon" type="image/x-icon"/>

    <title>PhoneGap入门教程(1) - 环境搭建与配置 | 卓文理</title>

    
    <link rel="stylesheet" href="/res/css/style.css">
    <script type="text/javascript" src="/res/js/jquery-2.1.1.min.js"></script>
</head>
<body>
    <div id="container" class="container modify">
        <main id="postPage" class="page post-page post-detail">
                <div class="post-menu">
        <a href="/" class="uplevel">
            <span class="arrow">‹</span>
            <strong class="logo">
                <span class="a">卓</span>
                <span class="b">文</span>
                <span class="c">理</span>
            </strong>
            <h1>前端开发</h1>
        </a>
        <ul class="stats">
            <li>
                <p>本站站长</p>
                <p><a target="_blank" href="http://www.zwlme.com">卓文理</a></p>
            </li>
            <li>
                <p>联系方式</p>
                <p><a target="_blank" href="mailto:531840344@qq.com">531840344@qq.com</a></p>
            </li>
        </ul>
    </div>
            <div class="post-container">
                <div class="article">
                    <a href="/frontend" class="back">
                        <span class="arrow">&lt;</span>
                        <span class="text">返回目录</span>
                    </a>
                    <header class="article-info">
                        <h1>PhoneGap入门教程(1) - 环境搭建与配置</h1>
                    </header>
                    <div class="article-body">
                        <p>PhoneGap是一能够让你用普通的web技术编写出能够轻松调用API接口和进入应用商店的HTML5应用开发平台。</p>

<p>是唯一的一个支持7个平台的开源移动框架。它的优势是无以伦比的：开发成本低——据估算，至多Native App的五分之一！</p>

<p>PhoneGap就是一种中间件技术，可以通过搭建一个webview来执行网页程序，并且可以提供调用底层API的接口。本教程将会介绍如何在windows下开发android应用。IOS版本有时间另外讲。</p>

<h2>PhoneGap安装与配置</h2>

<h3>安装与配置</h3>

<p>我们将使用NodeJS来管理开发。我们可以从下面的网址下载NodeJS。</p>

<p><a href="http://nodejs.org/">http://nodejs.org/</a></p>

<p>如图，NodeJS会判断操作系统，不同系统INSTALL按钮指向的链接也不同。</p>

<p><img src="/img/post/PhoneGap-1/1.png" alt=""></p>

<h3>安装PhoneGap</h3>

<p>Android开发是在windows上进行的，所以下载windows版的NodeJS。安装好NodeJS之后，其中会包含了npm这个管理器。</p>

<p>从windows开始菜单选择“Node.js command prompt”应用，并执行。会打开一个命令行工具，这将自动设置npm管理器环境。</p>

<p><img src="/img/post/PhoneGap-1/2.png" alt=""></p>

<p>下面我们使用命令行来进行安装。</p>
<div class="highlight"><pre><code class="language-html" data-lang="html">npm install phonegap
</code></pre></div>
<p>回车执行后会自动下载最新版本的PhoneGap，过段时间即可安装完成。安装完成后，可在下面的位置看到phonegap文件夹，说明下载安装完成。</p>
<div class="highlight"><pre><code class="language-html" data-lang="html">C:\Users\用户名\AppData\Roaming\npm\node_modules\
</code></pre></div>
<p><img src="/img/post/PhoneGap-1/3.png" alt=""></p>

<h2>建立PhoneGap for Android开发和测试环境</h2>

<p>要为Android开发原生应用程序，一般会使用Eclipce这个IDE，并且在上面安装专门用于android开发的插件：ADT。</p>

<p>无论任何环境进行android应用程序开发都需要Android SDK 支持才行。</p>

<p>当然，Google已经封装了一个包含Eclipce、ADT、Android SDK的集成开发包提供下载。</p>
<div class="highlight"><pre><code class="language-html" data-lang="html">http://developer.android.com/sdk
</code></pre></div>
<h3>安装ANT和配置环境</h3>

<p>PhoneGap需要Apache Ant来编译工程，因此需要装Apache Ant，可以从下面的网址下载：</p>
<div class="highlight"><pre><code class="language-html" data-lang="html">http://ant.apache.org/bindownload.cgi
</code></pre></div>
<p><img src="/img/post/PhoneGap-1/4.png" alt=""></p>

<p>下载的ANT仅仅是个压缩包，只需解压到一个目录就行。我将之解压到(D:\Application\Android\ant)目录下，然后还要配置环境变量<code>ANT_HOME</code>指向这个文件位置。</p>

<p>为了在命令行中方便使用ant命令，我们可以将ant的bin路径添加到PATH变量中。</p>
<div class="highlight"><pre><code class="language-html" data-lang="html">;%ANT_HOME%\bin
</code></pre></div>
<p>这里的<code>%ANT_HOME%</code>实际上是使用前面定义的<code>ANT_HOME</code>环境变量。</p>

<p><img src="/img/post/PhoneGap-1/5.png" alt=""></p>

<p><img src="/img/post/PhoneGap-1/6.png" alt=""></p>

<h3>配置Android环境</h3>

<p>此外，还要配置Android环境变量。添加<code>ANDROID_HOME</code>环境变量，指向SDK目录(D:\Application\Android\sdk)，然后添加到PATH中。</p>
<div class="highlight"><pre><code class="language-html" data-lang="html">;%ANDROID_HOME%\tools;%ANDROID_HOME%\platform-tools
</code></pre></div>
<p>这些同Android开发一样，这里就不再赘述了。</p>

<h2>创建PhoneGap工程</h2>

<p>下面我们使用PhoneGap来创建一个工程。使用管理员身份打开一个命令行窗口(cmd)，使用<code>cd</code>命令进入一个目录，将会在该目录创建工程。</p>

<p>使用PhoneGap create命令创建工程，命令如下：</p>
<div class="highlight"><pre><code class="language-html" data-lang="html">phonegap create <span class="err">&lt;</span>工程路径&gt; <span class="err">&lt;</span>包名&gt; <span class="err">&lt;</span>工程名&gt;
</code></pre></div>
<p>例如：</p>
<div class="highlight"><pre><code class="language-html" data-lang="html">phonegap create kypapp "zhuowenli.kyp.com" "HelloWorld"
</code></pre></div>
<p>第一次参数对应的是创建的工程的目录(kypapp)，第二个参数是包名，第三个参数是程序名称，也就是安装打包后在手机上显示的名称。</p>

<p><img src="/img/post/PhoneGap-1/7.png" alt=""></p>

<p>执行后就会在F:\kypapp目录下创建PhoneGap工程，如图：</p>

<p><img src="/img/post/PhoneGap-1/8.png" alt=""></p>

<h3>为PhoneGap工程添加Android平台</h3>

<p>PhoneGap工程创建完成后还不知道要在哪种平台上开发和部署程序，可选的平台有很多，如Android，IOS，WP8，blackberry10等等。如果你要添加哪个平台，就必须事先添加这个平台的SDK。我们现在来创建Android平台。</p>

<p>首先cd进入PhoneGap工程目录</p>
<div class="highlight"><pre><code class="language-html" data-lang="html">cd kypapp
</code></pre></div>
<p>然后调用下面命令添加Android平台。</p>
<div class="highlight"><pre><code class="language-html" data-lang="html">phonegap build android
</code></pre></div>
<p><img src="/img/post/PhoneGap-1/9.png" alt=""></p>

<p>并且在F:\kypapp\platforms目录下，将可以看到配置好的Android文件夹。</p>

<p><img src="/img/post/PhoneGap-1/10.png" alt=""></p>

<h2>使用ADT进行PhoneGap开发</h2>

<p>启动Eclipse。</p>

<p><img src="/img/post/PhoneGap-1/11.png" alt=""></p>

<p>初次启动需要指定Android SDK的目录。单机“Browser...”按钮导航到D:\Application\Android\sdk目录。</p>

<p><img src="/img/post/PhoneGap-1/12.png" alt=""></p>

<p>点击OK后就可以进入开发环境了。</p>

<ul>
<li><strong>步骤1</strong>  在主菜单上选择“File &gt; New &gt; Project”菜单栏，打开就能看到Android相关工程
<img src="/img/post/PhoneGap-1/13.png" alt=""></li>
<li><strong>步骤2</strong>  选择“Android Project from Existing Code”目录，点击Next
<img src="/img/post/PhoneGap-1/14.png" alt=""></li>
<li><strong>步骤3</strong>  点击“Browser...”按钮，导航到F:\kypapp\platforms\android目录（刚刚用PhoneGap添加的Android平台目录），将会在下面创建两个工程。
<img src="/img/post/PhoneGap-1/15.png" alt=""></li>
<li><strong>步骤4</strong>  右击HelloWorld主目录，选择“Properties &gt; Resource Filters”,删除“Exclude all:”下面的两条信息（选中，点击右侧Remove），然后点击OK。
<img src="/img/post/PhoneGap-1/16.png" alt="">
会发现assets底下多了个www文件夹啦。然后res下面的www文件夹可以删掉了。如图：
<img src="/img/post/PhoneGap-1/17.png" alt=""></li>
</ul>

<p>接下来在包浏览器中，打开“src &gt; zhuowenli.kyp.com &gt; CordovaApp.java”，这是主Java文件。
删除或注释掉下面一行代码：</p>
<div class="highlight"><pre><code class="language-html" data-lang="html">loadUrl(launchUrl);
</code></pre></div>
<p>替换为下面这行代码：</p>
<div class="highlight"><pre><code class="language-html" data-lang="html">super.loadUrl("file:///android_asset/www/index.html");
</code></pre></div>
<p><img src="/img/post/PhoneGap-1/18.png" alt=""></p>

<p>ok, 配置成功了。 接下来可以在菜单栏点击“Run As &gt; Android Application”，就可以在AVD或者手机设备打包apk，并安装了。</p>

<hr>

<blockquote>
<p>相关文章:</p>

<p>PhoneGap入门教程(1) - 环境安装与配置</p>

<p><a href="http://www.zwlme.com/frontend/phonegap-getting-started-tutorial-2.html">PhoneGap入门教程(2) - 内核事件和基本用法</a></p>

<p><a href="http://www.zwlme.com/frontend/phonegap-getting-started-tutorial-3.html">PhoneGap入门教程(3) - 原生插件安装和管理</a></p>

<p><a href="http://www.zwlme.com/frontend/phonegap-getting-started-tutorial-4.html">PhoneGap入门教程(4) - 电量变化侦测</a></p>

<p><a href="http://www.zwlme.com/frontend/phonegap-getting-started-tutorial-5.html">PhoneGap入门教程(5) - 程序内置浏览器窗口</a></p>

<p><a href="http://www.zwlme.com/frontend/phonegap-getting-started-tutorial-6.html">PhoneGap入门教程(6) - 设备信息和系统提示</a></p>
</blockquote>

                    </div>
                </div>
                <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'zhuowenli'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    
                        <footer class="footer">
            <p class="copyright">© 2015 卓文理 · <a href="/about/" class="about">关于本站</a> · Powered by <a href="http://github.com" class="powered">GitHub</a> &amp; <a href="http://jekyllcn.com" class="powered">Jekyll</a></p>
        </footer>
            </div>
            <div class="post-backdrop"></div>
        </main>

        <script type="text/javascript" src="/res/js/index.js"></script>
        <script type="text/javascript">
            app.init();
        </script>
    </div>
</body>
</html>